0001   0000             ;----------------------------------
0002   0000             ; Southern Cross ALED - ARGB  board 
0003   0000             ;----------------------------------
0004   0000             ;
0005   0000             ; Craig RS Jones	Dec 2024
0006   0000             ;
0007   0000             ; displays an animated pacman ghost on a 8 x 8 ARGB Matrix
0008   0000             ;
0009   0000             ;
0010   0000             shifter	.equ	10h	;ALED board I/O Address
0011   0000             
0012   2000             	.org	2000h
0013   2000             
0014   2000             start
0015   2000             
0016   2000 21 7D 20    	ld	hl,ghost1
0017   2003 06 40       	ld	b,64
0018   2005 CD 45 20    	call	arrayw
0019   2008 CD 2F 20    	call	framedelay
0020   200B             
0021   200B 21 3D 21    	ld	hl,ghost2
0022   200E 06 40       	ld	b,64
0023   2010 CD 45 20    	call	arrayw
0024   2013 CD 2F 20    	call	framedelay
0025   2016             
0026   2016 21 FD 21    	ld	hl,ghost3
0027   2019 06 40       	ld	b,64
0028   201B CD 45 20    	call	arrayw
0029   201E CD 2F 20    	call	framedelay
0030   2021             
0031   2021 21 BD 22    	ld	hl,ghost4
0032   2024 06 40       	ld	b,64
0033   2026 CD 45 20    	call	arrayw
0034   2029 CD 2F 20    	call	framedelay
0035   202C C3 00 20    	jp	start
0036   202F             
0037   202F             
0038   202F             ;750 millisecond frame rate
0039   202F             framedelay
0040   202F 06 FA       	ld	b,250
0041   2031 CD 73 20    	call	msdelay
0042   2034 06 FA       	ld	b,250
0043   2036 CD 73 20    	call	msdelay
0044   2039 06 FA       	ld	b,250
0045   203B CD 73 20    	call	msdelay
0046   203E C9          	ret
0047   203F             
0048   203F             ResetDelay
0049   203F 06 10       	ld	b,$10
0050   2041 00          ResetDelay1	nop
0051   2042 10 FD       	djnz	ResetDelay1
0052   2044 C9          	ret
0053   2045             ;-------------------------
0054   2045             ; write 8x8 array to ARGBs
0055   2045             ;-------------------------
0056   2045             ; B = 64 individual AGRBs
0057   2045             ; HL = points to 64 x 3 byte array
0058   2045             arrayw	
0059   2045 7E          	ld	a,(hl)	;green
0060   2046 23          	inc	hl
0061   2047             
0062   2047 D3 10       	out	(shifter),a	;output green
0063   2049 00          	nop
0064   204A 00          	nop
0065   204B 00          	nop
0066   204C 00          	nop
0067   204D             
0068   204D 7E          	ld	a,(hl)	;red
0069   204E 23          	inc	hl
0070   204F             
0071   204F D3 10       	out	(shifter),a	;output red
0072   2051 00          	nop
0073   2052 00          	nop
0074   2053 00          	nop
0075   2054 00          	nop
0076   2055             
0077   2055 7E          	ld	a,(hl)	;blue
0078   2056 23          	inc	hl
0079   2057             
0080   2057 D3 10       	out	(shifter),a	;output blue
0081   2059 00          	nop
0082   205A 00          	nop
0083   205B 00          	nop
0084   205C 00          	nop
0085   205D             	
0086   205D 10 E6       	djnz	arrayw
0087   205F CD 3F 20    	call	ResetDelay
0088   2062 C9          	ret
0089   2063             ;-------------
0090   2063             ; second delay
0091   2063             ;-------------
0092   2063             ; one second delay
0093   2063             ;
0094   2063             ; entry : b = 1 to 255 seconds
0095   2063             ; exit  : b = 0
0096   2063             ;
0097   2063             sdelay
0098   2063 C5          sdelay1	push	bc
0099   2064 06 0A       	ld	b,10	;10 x 100ms delay
0100   2066 C5          sdelay2	push	bc
0101   2067 06 64       	ld	b,100	;100ms delay
0102   2069 CD 73 20    	call	msdelay
0103   206C C1          	pop	bc
0104   206D 10 F7       	djnz	sdelay2
0105   206F C1          	pop	bc
0106   2070 10 F1       	djnz	sdelay1
0107   2072 C9          	ret
0108   2073             ;------------------
0109   2073             ; millisecond delay
0110   2073             ;------------------
0111   2073             ; approx. 1 millisecond delay
0112   2073             ; 
0113   2073             ; entry : b = 1 to 255 milliseconds
0114   2073             ; exit  : b = 0
0115   2073             ;
0116   2073 C5          msdelay	push	bc	;11t
0117   2074 06 E9       	ld	b,233	;7t
0118   2076 00          msdel1	nop	;4t
0119   2077 10 FD       	djnz	msdel1	;nz=13t,z=8t
0120   2079 C1          	pop	bc	;10t
0121   207A 10 F7       	djnz	msdelay	;nz=13t,z=8t
0122   207C C9          	ret	;10t
0123   207D             
0124   207D             ;
0125   207D             ; RGB888 ghost animation frames, 4 frames x 64 ARGB LEDs (WS2812B native order GRB) 
0126   207D             ;
0127   207D             ghost1
0128   207D 00 00 00 00 	.db	$00, $00, $00, $00, $00, $00, $00, $20, $00, $00, $20, $00, $22, $20, $00, $22, $20, $00, $00, $00, $00, $00, $00, $00
0128   2081 00 00 00 20 
0128   2085 00 00 20 00 
0128   2089 22 20 00 22 
0128   208D 20 00 00 00 
0128   2091 00 00 00 00 
0129   2095 00 00 00 00 	.db	$00, $00, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $22, $20, $00, $22, $20, $00, $00, $00, $00
0129   2099 20 00 00 20 
0129   209D 00 00 20 00 
0129   20A1 00 20 00 22 
0129   20A5 20 00 22 20 
0129   20A9 00 00 00 00 
0130   20AD 00 20 00 00 	.db	$00, $20, $00, $00, $20, $00, $20, $20, $20, $20, $20, $20, $00, $20, $00, $20, $20, $20, $20, $20, $20, $22, $20, $00
0130   20B1 20 00 20 20 
0130   20B5 20 20 20 20 
0130   20B9 00 20 00 20 
0130   20BD 20 20 20 20 
0130   20C1 20 22 20 00 
0131   20C5 00 20 00 00 	.db	$00, $20, $00, $00, $20, $00, $20, $20, $20, $00, $00, $00, $00, $20, $00, $20, $20, $20, $00, $00, $00, $22, $20, $00
0131   20C9 20 00 20 20 
0131   20CD 20 00 00 00 
0131   20D1 00 20 00 20 
0131   20D5 20 20 00 00 
0131   20D9 00 22 20 00 
0132   20DD 00 20 00 00 	.db	$00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $22, $20, $00, $22, $20, $00
0132   20E1 20 00 00 20 
0132   20E5 00 00 20 00 
0132   20E9 00 20 00 00 
0132   20ED 20 00 22 20 
0132   20F1 00 22 20 00 
0133   20F5 00 20 00 00 	.db	$00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $22, $20, $00, $22, $20, $00
0133   20F9 20 00 00 20 
0133   20FD 00 00 20 00 
0133   2101 00 20 00 00 
0133   2105 20 00 22 20 
0133   2109 00 22 20 00 
0134   210D 00 20 00 00 	.db	$00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $22, $20, $00, $22, $20, $00
0134   2111 20 00 00 20 
0134   2115 00 00 20 00 
0134   2119 00 20 00 00 
0134   211D 20 00 22 20 
0134   2121 00 22 20 00 
0135   2125 00 20 00 00 	.db	$00, $20, $00, $00, $00, $00, $00, $20, $00, $00, $00, $00, $00, $20, $00, $00, $00, $00, $22, $20, $00, $00, $00, $00
0135   2129 00 00 00 20 
0135   212D 00 00 00 00 
0135   2131 00 20 00 00 
0135   2135 00 00 22 20 
0135   2139 00 00 00 00 
0136   213D             ghost2
0137   213D 00 00 00 00 	.db	$00, $00, $00, $00, $00, $00, $00, $20, $00, $00, $20, $00, $22, $20, $00, $22, $20, $00, $00, $00, $00, $00, $00, $00
0137   2141 00 00 00 20 
0137   2145 00 00 20 00 
0137   2149 22 20 00 22 
0137   214D 20 00 00 00 
0137   2151 00 00 00 00 
0138   2155 00 00 00 00 	.db	$00, $00, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $22, $20, $00, $22, $20, $00, $00, $00, $00
0138   2159 20 00 00 20 
0138   215D 00 00 20 00 
0138   2161 00 20 00 22 
0138   2165 20 00 22 20 
0138   2169 00 00 00 00 
0139   216D 00 20 00 00 	.db	$00, $20, $00, $00, $20, $00, $20, $20, $20, $20, $20, $20, $00, $20, $00, $20, $20, $20, $20, $20, $20, $22, $20, $00
0139   2171 20 00 20 20 
0139   2175 20 20 20 20 
0139   2179 00 20 00 20 
0139   217D 20 20 20 20 
0139   2181 20 22 20 00 
0140   2185 00 20 00 00 	.db	$00, $20, $00, $00, $20, $00, $20, $20, $20, $00, $00, $00, $00, $20, $00, $20, $20, $20, $00, $00, $00, $22, $20, $00
0140   2189 20 00 20 20 
0140   218D 20 00 00 00 
0140   2191 00 20 00 20 
0140   2195 20 20 00 00 
0140   2199 00 22 20 00 
0141   219D 00 20 00 00 	.db	$00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $22, $20, $00, $22, $20, $00
0141   21A1 20 00 00 20 
0141   21A5 00 00 20 00 
0141   21A9 00 20 00 00 
0141   21AD 20 00 22 20 
0141   21B1 00 22 20 00 
0142   21B5 00 20 00 00 	.db	$00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $22, $20, $00, $22, $20, $00
0142   21B9 20 00 00 20 
0142   21BD 00 00 20 00 
0142   21C1 00 20 00 00 
0142   21C5 20 00 22 20 
0142   21C9 00 22 20 00 
0143   21CD 00 20 00 00 	.db	$00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $22, $20, $00, $22, $20, $00
0143   21D1 20 00 00 20 
0143   21D5 00 00 20 00 
0143   21D9 00 20 00 00 
0143   21DD 20 00 22 20 
0143   21E1 00 22 20 00 
0144   21E5 00 00 00 00 	.db	$00, $00, $00, $00, $20, $00, $00, $00, $00, $00, $20, $00, $00, $00, $00, $00, $20, $00, $00, $00, $00, $22, $20, $00
0144   21E9 20 00 00 00 
0144   21ED 00 00 20 00 
0144   21F1 00 00 00 00 
0144   21F5 20 00 00 00 
0144   21F9 00 22 20 00 
0145   21FD             ghost3
0146   21FD 00 00 00 00 	.db	$00, $00, $00, $00, $00, $00, $00, $20, $00, $00, $20, $00, $22, $20, $00, $22, $20, $00, $00, $00, $00, $00, $00, $00
0146   2201 00 00 00 20 
0146   2205 00 00 20 00 
0146   2209 22 20 00 22 
0146   220D 20 00 00 00 
0146   2211 00 00 00 00 
0147   2215 00 00 00 00 	.db	$00, $00, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $22, $20, $00, $22, $20, $00, $00, $00, $00
0147   2219 20 00 00 20 
0147   221D 00 00 20 00 
0147   2221 00 20 00 22 
0147   2225 20 00 22 20 
0147   2229 00 00 00 00 
0148   222D 00 20 00 00 	.db	$00, $20, $00, $00, $20, $00, $20, $20, $20, $20, $20, $20, $00, $20, $00, $20, $20, $20, $20, $20, $20, $22, $20, $00
0148   2231 20 00 20 20 
0148   2235 20 20 20 20 
0148   2239 00 20 00 20 
0148   223D 20 20 20 20 
0148   2241 20 22 20 00 
0149   2245 00 20 00 00 	.db	$00, $20, $00, $00, $20, $00, $00, $00, $00, $20, $20, $20, $00, $20, $00, $00, $00, $00, $20, $20, $20, $22, $20, $00
0149   2249 20 00 00 00 
0149   224D 00 20 20 20 
0149   2251 00 20 00 00 
0149   2255 00 00 20 20 
0149   2259 20 22 20 00 
0150   225D 00 20 00 00 	.db	$00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $22, $20, $00, $22, $20, $00
0150   2261 20 00 00 20 
0150   2265 00 00 20 00 
0150   2269 00 20 00 00 
0150   226D 20 00 22 20 
0150   2271 00 22 20 00 
0151   2275 00 20 00 00 	.db	$00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $22, $20, $00, $22, $20, $00
0151   2279 20 00 00 20 
0151   227D 00 00 20 00 
0151   2281 00 20 00 00 
0151   2285 20 00 22 20 
0151   2289 00 22 20 00 
0152   228D 00 20 00 00 	.db	$00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $22, $20, $00, $22, $20, $00
0152   2291 20 00 00 20 
0152   2295 00 00 20 00 
0152   2299 00 20 00 00 
0152   229D 20 00 22 20 
0152   22A1 00 22 20 00 
0153   22A5 00 20 00 00 	.db	$00, $20, $00, $00, $00, $00, $00, $20, $00, $00, $00, $00, $00, $20, $00, $00, $00, $00, $22, $20, $00, $00, $00, $00
0153   22A9 00 00 00 20 
0153   22AD 00 00 00 00 
0153   22B1 00 20 00 00 
0153   22B5 00 00 22 20 
0153   22B9 00 00 00 00 
0154   22BD             ghost4
0155   22BD 00 00 00 00 	.db	$00, $00, $00, $00, $00, $00, $00, $20, $00, $00, $20, $00, $22, $20, $00, $22, $20, $00, $00, $00, $00, $00, $00, $00
0155   22C1 00 00 00 20 
0155   22C5 00 00 20 00 
0155   22C9 22 20 00 22 
0155   22CD 20 00 00 00 
0155   22D1 00 00 00 00 
0156   22D5 00 00 00 00 	.db	$00, $00, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $22, $20, $00, $22, $20, $00, $00, $00, $00
0156   22D9 20 00 00 20 
0156   22DD 00 00 20 00 
0156   22E1 00 20 00 22 
0156   22E5 20 00 22 20 
0156   22E9 00 00 00 00 
0157   22ED 00 20 00 00 	.db	$00, $20, $00, $00, $20, $00, $20, $20, $20, $20, $20, $20, $00, $20, $00, $20, $20, $20, $20, $20, $20, $22, $20, $00
0157   22F1 20 00 20 20 
0157   22F5 20 20 20 20 
0157   22F9 00 20 00 20 
0157   22FD 20 20 20 20 
0157   2301 20 22 20 00 
0158   2305 00 20 00 00 	.db	$00, $20, $00, $00, $20, $00, $00, $00, $00, $20, $20, $20, $00, $20, $00, $00, $00, $00, $20, $20, $20, $22, $20, $00
0158   2309 20 00 00 00 
0158   230D 00 20 20 20 
0158   2311 00 20 00 00 
0158   2315 00 00 20 20 
0158   2319 20 22 20 00 
0159   231D 00 20 00 00 	.db	$00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $22, $20, $00, $22, $20, $00
0159   2321 20 00 00 20 
0159   2325 00 00 20 00 
0159   2329 00 20 00 00 
0159   232D 20 00 22 20 
0159   2331 00 22 20 00 
0160   2335 00 20 00 00 	.db	$00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $22, $20, $00, $22, $20, $00
0160   2339 20 00 00 20 
0160   233D 00 00 20 00 
0160   2341 00 20 00 00 
0160   2345 20 00 22 20 
0160   2349 00 22 20 00 
0161   234D 00 20 00 00 	.db	$00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $00, $20, $00, $22, $20, $00, $22, $20, $00
0161   2351 20 00 00 20 
0161   2355 00 00 20 00 
0161   2359 00 20 00 00 
0161   235D 20 00 22 20 
0161   2361 00 22 20 00 
0162   2365 00 00 00 00 	.db	$00, $00, $00, $00, $20, $00, $00, $00, $00, $00, $20, $00, $00, $00, $00, $00, $20, $00, $00, $00, $00, $22, $20, $00
0162   2369 20 00 00 00 
0162   236D 00 00 20 00 
0162   2371 00 00 00 00 
0162   2375 20 00 00 00 
0162   2379 00 22 20 00 
0163   237D             
0164   237D             	.end


Label        Value      Label        Value      Label        Value
------------------      ------------------      ------------------
ResetDelay    203F      ResetDelay1   2041      arrayw        2045      
framedelay    202F      ghost1        207D      ghost2        213D      
ghost3        21FD      ghost4        22BD      msdelay       2073      
msdel1        2076      shifter       0010      start         2000      
sdelay        2063      sdelay1       2063      sdelay2       2066      

tasm: Number of errors = 0
